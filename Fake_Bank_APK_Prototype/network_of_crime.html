<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fake APK Detector</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- DaisyUI CDN for the toggle switch and other components -->
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.2/dist/full.min.css" rel="stylesheet" type="text/css" />
    <!-- Leaflet CSS for maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container-main {
            max-width: 1000px;
        }
        .scan-button {
            transition: transform 0.2s ease-in-out;
        }
        .scan-button:hover {
            transform: scale(1.05);
        }
        #crimeMap {
            height: 400px;
            width: 100%;
            border-radius: 12px;
            z-index: 1;
        }
        .crime-cluster {
            background-color: #dc2626;
            border-radius: 50%;
            color: white;
            font-weight: bold;
            text-align: center;
            line-height: 40px;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <!-- Main Container -->
    <div class="container-main w-full bg-white rounded-2xl shadow-2xl overflow-hidden p-6 md:p-10 border border-gray-200">

        <!-- Header and Intro -->
        <header class="text-center mb-10">
            <div class="flex items-center justify-center mb-4">
                <svg class="w-16 h-16 text-blue-600" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                </svg>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-gray-800 mb-2">Fake APK Detector</h1>
            <p class="text-lg text-gray-600">A demo showcasing a mobile security app for the Gen AI Exchange Hackathon.</p>
        </header>

        <!-- Dashboard Switch -->
        <div class="flex justify-center mb-6">
            <button id="userDashboardBtn" class="px-6 py-2 rounded-l-lg font-bold transition-colors duration-200 bg-blue-600 text-white shadow-lg">User Dashboard</button>
            <button id="policeDashboardBtn" class="px-6 py-2 rounded-r-lg font-bold transition-colors duration-200 bg-gray-200 text-gray-700 hover:bg-gray-300">Police Dashboard</button>
            <button id="crimeNetworkBtn" class="px-6 py-2 rounded-r-lg font-bold transition-colors duration-200 bg-gray-200 text-gray-700 hover:bg-gray-300 ml-2">Network of Crime</button>
        </div>

        <!-- Main Content Area -->
        <main>
            <!-- File Upload Simulation & Input -->
            <div class="mb-8">
                <p class="text-sm text-center text-gray-500 mb-4">Simulated APK Upload. Enter a package name to begin scanning.</p>
                <div class="flex flex-col md:flex-row gap-4">
                    <input type="text" id="packageInput" placeholder="Enter package name (e.g., com.sbi.lotusintouch)" class="flex-grow p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-shadow">
                    <button id="scanButton" class="scan-button bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 flex items-center justify-center gap-2">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        Scan APK
                    </button>
                </div>
            </div>
            
            <!-- Dashboard/Summary Section -->
            <section id="dashboard" class="mb-10">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Dashboard</h2>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
                    <div class="bg-blue-50 p-6 rounded-xl shadow-inner border border-blue-200">
                        <p class="text-gray-500 text-sm mb-1">Fakes Blocked</p>
                        <p class="text-4xl font-extrabold text-blue-800">14</p>
                    </div>
                    <div class="bg-blue-50 p-6 rounded-xl shadow-inner border border-blue-200">
                        <p class="text-gray-500 text-sm mb-1">Suspicious Activity</p>
                        <p class="text-4xl font-extrabold text-yellow-500">3</p>
                    </div>
                    <div class="bg-blue-50 p-6 rounded-xl shadow-inner border border-blue-200">
                        <p class="text-gray-500 text-sm mb-1">Active Scams</p>
                        <p class="text-4xl font-extrabold text-red-500">2</p>
                    </div>
                    <div class="bg-blue-50 p-6 rounded-xl shadow-inner border border-blue-200">
                        <p class="text-gray-500 text-sm mb-1">Crime Hotspots</p>
                        <p class="text-4xl font-extrabold text-purple-600">8</p>
                    </div>
                </div>
            </section>

            <!-- User Report Section -->
            <section id="userReport" class="hidden text-center">
                <div id="userReportContent" class="bg-gray-50 p-6 rounded-xl shadow-inner border border-gray-200">
                    <!-- User report will be injected here -->
                </div>
            </section>

            <!-- Police/Admin Report Section -->
            <section id="policeReport" class="hidden">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Detailed Scan Report</h2>
                    <div id="policeStatusBadge" class="px-4 py-1 rounded-full font-bold text-sm"></div>
                </div>
                <div id="policeReportContent" class="bg-gray-50 p-6 rounded-xl shadow-inner border border-gray-200">
                    <!-- Police report will be injected here -->
                </div>
            </section>

            <!-- Network of Crime Section -->
            <section id="crimeNetwork" class="hidden">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-2xl font-bold text-gray-800">Network of Crime - Fake APK Hotspots</h2>
                    <div class="px-4 py-1 rounded-full font-bold text-sm bg-purple-100 text-purple-700 border border-purple-300">
                        Live Tracking
                    </div>
                </div>
                <div class="bg-gray-50 p-6 rounded-xl shadow-inner border border-gray-200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <h3 class="font-bold text-lg mb-3 text-gray-800">Crime Statistics</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>Total Detections:</span>
                                    <span class="font-bold">127</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Active Campaigns:</span>
                                    <span class="font-bold text-red-600">8</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Countries Affected:</span>
                                    <span class="font-bold">12</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Last Updated:</span>
                                    <span class="font-bold">Just now</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <h3 class="font-bold text-lg mb-3 text-gray-800">Top Campaigns</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between">
                                    <span>Diwali-Scam-Campaign-2025:</span>
                                    <span class="font-bold text-red-600">48 detections</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>HDFC-Phishing-Loan-Scam:</span>
                                    <span class="font-bold text-red-600">32 detections</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Generic-Phishing-Campaign:</span>
                                    <span class="font-bold text-red-600">27 detections</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="crimeMap"></div>
                    
                    <div class="mt-6">
                        <h3 class="font-bold text-lg mb-3 text-gray-800">Recent Activity</h3>
                        <div class="space-y-2">
                            <div class="flex justify-between items-center p-3 bg-red-50 rounded-lg">
                                <div>
                                    <span class="font-bold">New Delhi, India</span>
                                    <span class="text-sm text-gray-600">- 5 fake APKs detected</span>
                                </div>
                                <span class="text-red-600 font-bold">10 min ago</span>
                            </div>
                            <div class="flex justify-between items-center p-3 bg-yellow-50 rounded-lg">
                                <div>
                                    <span class="font-bold">Mumbai, India</span>
                                    <span class="text-sm text-gray-600">- 3 suspicious activities</span>
                                </div>
                                <span class="text-yellow-600 font-bold">25 min ago</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Custom Modal for Pre-installation Blocker -->
    <div id="blockerModal" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 hidden">
        <div class="bg-red-100 p-8 rounded-2xl shadow-lg w-full max-w-sm text-center border border-red-300">
            <div class="flex items-center justify-center text-red-500 mb-4">
                <svg class="w-16 h-16" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                </svg>
            </div>
            <h3 class="text-2xl font-extrabold text-red-700 mb-2">Malicious App Detected!</h3>
            <p class="text-red-600 mb-4">This APK has been flagged as highly malicious and is a significant security risk. We recommend you **DO NOT** install this app.</p>
            <button id="closeBlockerModal" class="bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400">
                Acknowledge
            </button>
        </div>
    </div>
    
    <!-- Leaflet JS for maps -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    
    <script type="module">
        // ... [Previous JavaScript code remains the same until the end] ...

        // Add crime network data and mapping functionality
        const crimeLocations = [
            { lat: 28.6139, lng: 77.2090, city: "New Delhi", country: "India", count: 15, campaigns: ["Diwali-Scam-Campaign-2025", "HDFC-Phishing-Loan-Scam"] },
            { lat: 19.0760, lng: 72.8777, city: "Mumbai", country: "India", count: 12, campaigns: ["Generic-Phishing-Campaign"] },
            { lat: 13.0827, lng: 80.2707, city: "Chennai", country: "India", count: 8, campaigns: ["Diwali-Scam-Campaign-2025"] },
            { lat: 22.5726, lng: 88.3639, city: "Kolkata", country: "India", count: 6, campaigns: ["HDFC-Phishing-Loan-Scam"] },
            { lat: 12.9716, lng: 77.5946, city: "Bengaluru", country: "India", count: 10, campaigns: ["Generic-Phishing-Campaign"] },
            { lat: 17.3850, lng: 78.4867, city: "Hyderabad", country: "India", count: 7, campaigns: ["Diwali-Scam-Campaign-2025"] },
            { lat: 23.0225, lng: 72.5714, city: "Ahmedabad", country: "India", count: 5, campaigns: ["HDFC-Phishing-Loan-Scam"] },
            { lat: 26.9124, lng: 75.7873, city: "Jaipur", country: "India", count: 4, campaigns: ["Generic-Phishing-Campaign"] }
        ];

        let crimeMap = null;

        function initializeCrimeMap() {
            if (crimeMap) {
                crimeMap.remove();
            }

            crimeMap = L.map('crimeMap').setView([20.5937, 78.9629], 5);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '© OpenStreetMap contributors'
            }).addTo(crimeMap);

            // Add crime location markers
            crimeLocations.forEach(location => {
                const marker = L.marker([location.lat, location.lng]).addTo(crimeMap);
                marker.bindPopup(`
                    <div class="p-2">
                        <h4 class="font-bold text-lg">${location.city}, ${location.country}</h4>
                        <p class="text-red-600 font-bold">${location.count} fake APKs detected</p>
                        <p class="text-sm">Campaigns: ${location.campaigns.join(', ')}</p>
                        <p class="text-xs text-gray-500">Last detected: Today</p>
                    </div>
                `);
            });

            // Add heatmap effect using circle markers
            crimeLocations.forEach(location => {
                const radius = Math.sqrt(location.count) * 50000;
                L.circle([location.lat, location.lng], {
                    color: 'red',
                    fillColor: '#f03',
                    fillOpacity: 0.2,
                    radius: radius
                }).addTo(crimeMap);
            });
        }

        // Add event listener for crime network button
        document.getElementById('crimeNetworkBtn').addEventListener('click', () => {
            document.getElementById('crimeNetworkBtn').classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('crimeNetworkBtn').classList.add('bg-purple-600', 'text-white');
            document.getElementById('userDashboardBtn').classList.remove('bg-blue-600', 'text-white');
            document.getElementById('userDashboardBtn').classList.add('bg-gray-200', 'text-gray-700');
            document.getElementById('policeDashboardBtn').classList.remove('bg-blue-600', 'text-white');
            document.getElementById('policeDashboardBtn').classList.add('bg-gray-200', 'text-gray-700');
            
            document.getElementById('userReport').classList.add('hidden');
            document.getElementById('policeReport').classList.add('hidden');
            document.getElementById('crimeNetwork').classList.remove('hidden');
            
            // Initialize map when crime network is shown
            setTimeout(initializeCrimeMap, 100);
        });

        // Update existing dashboard switch listeners to hide crime network
        document.getElementById('userDashboardBtn').addEventListener('click', () => {
            currentDashboard = 'user';
            document.getElementById('userDashboardBtn').classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('userDashboardBtn').classList.add('bg-blue-600', 'text-white');
            document.getElementById('policeDashboardBtn').classList.remove('bg-blue-600', 'text-white');
            document.getElementById('policeDashboardBtn').classList.add('bg-gray-200', 'text-gray-700');
            document.getElementById('crimeNetworkBtn').classList.remove('bg-purple-600', 'text-white');
            document.getElementById('crimeNetworkBtn').classList.add('bg-gray-200', 'text-gray-700');
            
            document.getElementById('userReport').classList.remove('hidden');
            document.getElementById('policeReport').classList.add('hidden');
            document.getElementById('crimeNetwork').classList.add('hidden');
        });

        document.getElementById('policeDashboardBtn').addEventListener('click', () => {
            currentDashboard = 'police';
            document.getElementById('policeDashboardBtn').classList.remove('bg-gray-200', 'text-gray-700');
            document.getElementById('policeDashboardBtn').classList.add('bg-blue-600', 'text-white');
            document.getElementById('userDashboardBtn').classList.remove('bg-blue-600', 'text-white');
            document.getElementById('userDashboardBtn').classList.add('bg-gray-200', 'text-gray-700');
            document.getElementById('crimeNetworkBtn').classList.remove('bg-purple-600', 'text-white');
            document.getElementById('crimeNetworkBtn').classList.add('bg-gray-200', 'text-gray-700');
            
            document.getElementById('userReport').classList.add('hidden');
            document.getElementById('policeReport').classList.remove('hidden');
            document.getElementById('crimeNetwork').classList.add('hidden');
        });

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('userReport').classList.add('hidden');
            document.getElementById('policeReport').classList.add('hidden');
            document.getElementById('crimeNetwork').classList.add('hidden');
        });

    </script>

</body>
</html>